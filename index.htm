<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gmail Dot Count</title>

<style>
body{
    font-family: Arial, sans-serif;
    background:#cfd8e3;
    margin:0;
    padding:30px 15px;
}
.container{
    max-width:420px;
    margin:auto;
    background:#ffffff;
    padding:25px;
    border-radius:16px;
    box-shadow:0 8px 20px rgba(0,0,0,0.08);
}
h1{
    text-align:center;
    margin-bottom:25px;
    font-size:22px;
}
label{
    font-weight:bold;
    font-size:14px;
}
input{
    width:100%;
    padding:12px;
    border-radius:10px;
    border:1px solid #ccc;
    margin-top:6px;
    margin-bottom:18px;
    font-size:14px;
}
.button-row{
    display:flex;
    gap:10px;
    margin-bottom:20px;
}
button{
    flex:1;
    padding:11px;
    border:none;
    border-radius:10px;
    color:white;
    font-size:14px;
    cursor:pointer;
}
.generate{ background:#0aa21b; }
.copy{ background:#1976d2; }
.reset{ background:#ff1744; }

.box-row{
    display:flex;
    gap:10px;
    margin-bottom:20px;
}
.box{
    flex:1;
    background:#f5f5f5;
    border-radius:10px;
    padding:12px;
    text-align:center;
}
.box h3{
    margin:0;
    font-size:13px;
    font-weight:normal;
}
.box p{
    font-size:18px;
    margin:8px 0 0 0;
    font-weight:bold;
}

textarea{
    width:100%;
    height:140px;
    border-radius:10px;
    border:1px solid #ccc;
    padding:12px;
    font-size:13px;
    resize:none;
}

.bottom-row{
    display:flex;
    gap:10px;
    margin-top:15px;
}
.salin{ background:#757575; }
.export{ background:#0097a7; }
.hapus{ background:#ff9800; }

.footer{
    margin-top:25px;
    background:#1976d2;
    color:white;
    text-align:center;
    padding:10px;
    border-radius:10px;
    font-size:12px;
}
</style>
</head>

<body>

<div class="container">

<h1>Gmail Dot Count</h1>

<label>Email</label>
<input type="text" id="email" placeholder="masukkan email gmail">

<div class="button-row">
    <button class="generate" onclick="generate()">Generate</button>
    <button class="copy" onclick="generateDanCopy()">Copy</button>
    <button class="reset" onclick="resetAll()">Reset</button>
</div>

<div class="box-row">
    <div class="box">
        <h3>Jumlah Kombinasi</h3>
        <p id="jumlahKombinasi">0</p>
    </div>
    <div class="box">
        <h3>Jumlah Salin</h3>
        <p id="jumlahSalin">0</p>
    </div>
</div>

<h3>Hasil:</h3>
<textarea id="hasil" readonly></textarea>

<div class="bottom-row">
    <button class="salin" onclick="copyHasil()">Salin Hasil</button>
    <button class="export" onclick="exportTxt()">Export (.txt)</button>
    <button class="hapus" onclick="hapusHasil()">Hapus Hasil</button>
</div>

<div class="footer">
Versi 2.0.2 - Update: 14 Februari 2026
</div>

</div>

<script>
let salinCount = 0;
let currentIndex = 0;
let totalKombinasi = 0;
let localPart = "";

// Hitung jumlah kombinasi
function generate(){
    let email = document.getElementById("email").value.trim();

    if(!email.endsWith("@gmail.com")){
        alert("Masukkan email gmail yang valid!");
        return;
    }

    localPart = email.split("@")[0];

    if(localPart.length < 2){
        alert("Email terlalu pendek!");
        return;
    }

    if(localPart.length > 15){
        alert("Maksimal 15 karakter sebelum @gmail.com");
        return;
    }

    totalKombinasi = 1 << (localPart.length - 1);

    document.getElementById("jumlahKombinasi").innerText = totalKombinasi;

    currentIndex = 0;
    document.getElementById("hasil").value = "";
}

// Copy satu per klik + tambah ke bawah
function generateDanCopy(){

    if(localPart === "" || totalKombinasi === 0){
        alert("Klik Generate dulu!");
        return;
    }

    if(currentIndex >= totalKombinasi){
        alert("Semua kombinasi sudah dicopy!");
        return;
    }

    let temp = localPart[0];
    let n = localPart.length;

    for(let j = 0; j < n - 1; j++){
        if(currentIndex & (1 << j)){
            temp += ".";
        }
        temp += localPart[j+1];
    }

    let emailResult = temp + "@gmail.com";

    navigator.clipboard.writeText(emailResult);

    let textarea = document.getElementById("hasil");

    if(textarea.value === ""){
        textarea.value = emailResult;
    } else {
        textarea.value += "\n" + emailResult;
    }

    textarea.scrollTop = textarea.scrollHeight;

    salinCount++;
    document.getElementById("jumlahSalin").innerText = salinCount;

    currentIndex++;
}

// Copy seluruh isi textarea
function copyHasil(){
    let text = document.getElementById("hasil").value;
    if(text === "") return;

    navigator.clipboard.writeText(text);

    salinCount++;
    document.getElementById("jumlahSalin").innerText = salinCount;
}

function resetAll(){
    document.getElementById("email").value = "";
    document.getElementById("hasil").value = "";
    document.getElementById("jumlahKombinasi").innerText = "0";
    document.getElementById("jumlahSalin").innerText = "0";

    salinCount = 0;
    currentIndex = 0;
    totalKombinasi = 0;
    localPart = "";
}

function hapusHasil(){
    document.getElementById("hasil").value = "";
}

function exportTxt(){
    alert("Export dinonaktifkan pada mode copy satu-persatu.");
}
</script>

</body>
</html>